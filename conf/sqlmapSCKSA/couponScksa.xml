<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="couponScksa">

	<!-- 쿠폰 발행 등록 (통영) -->
	<update id="couponScksa.insertSmkCoupSeqMulti" parameterClass="java.util.List">
		INSERT /* [couponScksa.xml][couponScksa.insertSmkCoupSeqMulti] */
		   ALL
		<iterate conjunction=" ">		
		  INTO SMK_COUP_SEQ (
		       stkyear
		       , cupkind
		       , cupnum
		       , indate
		       , outstcd
		       , outymd
		       , pflag
		       , insert_date
		       , insert_user
		       , chkdgt
		       , amount
		       )
		VALUES (
		       TO_CHAR(SYSDATE, 'yyyy')
		       , FN_MAP_CUPKIND(#[].coupon_code#)
		       , #[].coupon_number#
		       , TO_CHAR(SYSDATE, 'yyyyMMdd')
		       , '9004'
		       , TO_CHAR(SYSDATE, 'yyyyMMdd')
		       , '1'
		       , SYSDATE
		       , '00093995'
		       , SUBSTR(#[].coupon_number#, LENGTH(#[].coupon_number#))
		       , 0
		       )
        </iterate>
        SELECT * FROM DUAL		       
	</update>
</sqlMap>